"use strict";!function(e){e.module("alt.header-fixed",[]).constant("AltHeaderFixedEvents",{CALC_FIXED_HEADER_SIZE:"header.fixed:calc_fixed_header_size"}).service("AltHeaderFixedService",["$rootScope","AltHeaderFixedEvents",function(e,i){this.startDirective=function(t,d){e.$broadcast(i.CALC_FIXED_HEADER_SIZE,t,d)}}]).directive("altHeaderFixedDirective",["$rootScope","AltHeaderFixedEvents","$timeout","$window",function(e,i,t,d){return{retrict:"A",scope:{id:"=?",mgTop:"=?",styles:"=?"},link:function(e,n){function o(){var i="";for(var t in e.styles)i+=t+": "+e.styles[t]+"; ";$("head").prepend('<style id="headerFixedDirectiveStyles_'+e.randomNumber+'">#'+e.id+" .theadFixed {"+i+"}</style>")}function r(){e.tFixed.find("th").each(function(e){$(this).css("width",n.find("th").eq(e).outerWidth()+"px")})}function a(){e.tFixed?n.parent().find(".theadFixed").remove():n.wrap('<div id="'+e.id+'" />'),e.tFixed=n.clone(),e.tFixed.find("tbody").remove().end().addClass("theadFixed").insertBefore(n),e.tFixed.removeClass("ng-hide"),r()}function s(){var i=$(this).scrollTop(),t=n.offset().top-e.mgTop,d=t+n.height()-n.find("thead").height();(i<t||i>d)&&e.tFixed.hide(),i>=t&&i<=d&&e.tFixed.is(":hidden")&&e.tFixed.show()}e.tFixed=null,e.randomNumber=Math.floor(Math.random()/1e-4),e.id||(e.id="tableHeaderFixed"),e.mgTop||(e.mgTop=0),e.styles||(e.styles={top:0,position:"fixed",width:"auto",display:"none",border:"none"}),e.$on(i.CALC_FIXED_HEADER_SIZE,function(i,n){(!n||!n.id||n.id!==e.id)&&"tableHeaderFixed"!==e.id||t(function(){a(),angular.element(d).on("resize",r),angular.element(d).on("scroll",s)})}),e.$on("$destroy",function(){$("head").find("#headerFixedDirectiveStyles_"+e.randomNumber).remove()}),function(){o()}()}}}])}(window.angular);